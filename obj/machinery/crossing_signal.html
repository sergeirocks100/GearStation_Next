<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;obj&#x2F;machinery&#x2F;crossing_signal - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="obj/machinery/crossing_signal.html#var">Var Details</a> - <a href="obj/machinery/crossing_signal.html#proc">Proc Details</a></header>
<main>
<h1>crossing_signal <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/crossing_signal.html">crossing_signal</a></aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L11">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 11"/></a></h1>

<p>Pedestrian crossing signal for tram</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/amber_distance_threshold">amber_distance_threshold</a></th><td>Proximity threshold for amber warning (slow people may be in danger).
This is specific to Tramstation and may need to be adjusted if the map changes in the distance between tram stops.</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/malfunctioning">malfunctioning</a></th><td>Are we malfunctioning?</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/red_distance_threshold">red_distance_threshold</a></th><td></td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/signal_direction">signal_direction</a></th><td>If the signal is facing east or west</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/signal_state">signal_state</a></th><td>green, amber, or red.</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/tram_id">tram_id</a></th><td>The ID of the tram we control</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#var/tram_ref">tram_ref</a></th><td>Weakref to the tram piece we control</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#proc/find_tram">find_tram</a></th><td>Finds the tram, just like the tram computer</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#proc/on_tram_travelling">on_tram_travelling</a></th><td>Only process if the tram is actually moving</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#proc/set_signal_state">set_signal_state</a></th><td>Set the signal state and update appearance.</td></tr>
            <tr><th><a href="obj/machinery/crossing_signal.html#proc/update_operating">update_operating</a></th><td>Update processing state.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/amber_distance_threshold"><aside class="declaration">var </aside>amber_distance_threshold
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L38">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 38"/></a></h3>
        <p>Proximity threshold for amber warning (slow people may be in danger).
This is specific to Tramstation and may need to be adjusted if the map changes in the distance between tram stops.</p><h3 id="var/malfunctioning"><aside class="declaration">var </aside>malfunctioning
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L47">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 47"/></a></h3>
        <p>Are we malfunctioning?</p><h3 id="var/red_distance_threshold"><aside class="declaration">var </aside>red_distance_threshold
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L43">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 43"/></a></h3>
        <ul>
<li>Proximity threshold for red warning (running people will likely not be able to cross) This is specific to Tramstation and may need to be adjusted if the map changes in the distance between tram stops.
<ul>
<li>This checks the distance between the tram and the signal, and based on the current Tramstation map this is the optimal number to prevent the lights from turning red for no reason for a few moments.</li>
<li>If the value is set too high, it will cause the lights to turn red when the tram arrives at another station. You want to optimize the amount of warning without turning it red unnessecarily.</li>
</ul>
</li>
</ul><h3 id="var/signal_direction"><aside class="declaration">var </aside>signal_direction
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L45">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 45"/></a></h3>
        <p>If the signal is facing east or west</p><h3 id="var/signal_state"><aside class="declaration">var </aside>signal_state
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L31">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 31"/></a></h3>
        <p>green, amber, or red.</p><h3 id="var/tram_id"><aside class="declaration">var </aside>tram_id
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L33">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 33"/></a></h3>
        <p>The ID of the tram we control</p><h3 id="var/tram_ref"><aside class="declaration">var </aside>tram_ref
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside>
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L35">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 35"/></a></h3>
        <p>Weakref to the tram piece we control</p><h2 id="proc">Proc Details</h2><h3 id="proc/find_tram"><aside class="declaration">proc </aside>find_tram<aside>() 
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L95">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 95"/></a></aside>
        </h3>
        <p>Finds the tram, just like the tram computer</p>
<p>Locates tram parts in the lift global list after everything is done.</p><h3 id="proc/on_tram_travelling"><aside class="declaration">proc </aside>on_tram_travelling<aside>(/<a href="datum.html">datum</a>/source, travelling) 
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L105">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 105"/></a></aside>
        </h3>
        <p>Only process if the tram is actually moving</p><h3 id="proc/set_signal_state"><aside class="declaration">proc </aside>set_signal_state<aside>(new_state, force) 
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L204">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 204"/></a></aside>
        </h3>
        <p>Set the signal state and update appearance.</p>
<p>Arguments:
new_state - the new state (XING_STATE_RED, etc)
force_update - force appearance to update even if state didn't change.</p><h3 id="proc/update_operating"><aside class="declaration">proc </aside>update_operating<aside>() 
        
    
            <a href="https://github.com/sergeirocks100/GearStation_Next/blob/bb4ef4f48b1aba9846776422ca937ab53debe4e7/code/modules/industrial_lift/crossing_signal.dm#L120">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;industrial_lift&#x2F;crossing_signal.dm 120"/></a></aside>
        </h3>
        <p>Update processing state.</p>
<p>Returns whether we are still processing.</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/sergeirocks100/GearStation_Next/tree/bb4ef4f48b1aba9846776422ca937ab53debe4e7">bb4ef4f</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.4.1</a></footer>
</body>
</html>
